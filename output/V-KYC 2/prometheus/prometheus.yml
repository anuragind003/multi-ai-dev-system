# prometheus/prometheus.yml
# Prometheus configuration for scraping FastAPI application metrics.

global:
  scrape_interval: 15s # How frequently to scrape targets
  evaluation_interval: 15s # How frequently to evaluate rules

# A scrape configuration for the FastAPI application
scrape_configs:
  - job_name: 'fastapi_app'
    # metrics_path defaults to /metrics
    # scheme defaults to http
    static_configs:
      - targets: ['fastapi_app:8000'] # 'fastapi_app' is the service name in docker-compose
        labels:
          application: fastapi_app
          environment: development

  # Optional: Scrape Prometheus itself
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Optional: Scrape cAdvisor for container metrics (if running cAdvisor)
  # - job_name: 'cadvisor'
  #   static_configs:
  #     - targets: ['cadvisor:8080']

  # Optional: Scrape Node Exporter for host metrics (if running Node Exporter)
  # - job_name: 'node_exporter'
  #   static_configs:
  #     - targets: ['node_exporter:9100']